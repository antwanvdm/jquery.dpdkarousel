(function(d){if(!d.fn.transition){d.fn.transition=d.fn.animate}var c={widthIsFluid:true,width:1000,height:400,resizeHeight:false,heightIsPercentage:false,timer:true,delay:10000,animateEl:"li.slide",touchEnabled:false,onHoverStop:true,animationDuration:700,animationEasing:"swing",progressBar:false,pager:false,pagerClickable:false,previousTrigger:".previous",nextTrigger:".next"};var b={$pager:null,currentActiveSlide:0,totalSlides:0,timer:null,cWidth:0,isAnimating:false,apiPause:false,apiActiveSlide:-1,init:function(e){this.$el=e;this.settings=this.$el.settings;if(this.settings.heightIsPercentage==false){this.$el.height(this.settings.height)}this.cWidth=this.settings.widthIsFluid?d(window).width():this.settings.width;this.totalSlides=this.$el.find(this.settings.animateEl).length;this.settings.timer=this.totalSlides==1?false:this.settings.timer;this.addClasses();this.timer=new a(this.$el,_.bind(this.animateSlides,this,"next"),this.settings.delay);this.$el.find(this.settings.nextTrigger).on("click touchstart",_.bind(this.next,this));this.$el.find(this.settings.previousTrigger).on("click touchstart",_.bind(this.previous,this));if(this.settings.progressBar){this.initProgressBar();this.$el.on("slideStart",_.bind(this.animateProgressBar,this,true));this.$el.on("pauseTimer",_.bind(this.pauseProgressBar,this));this.$el.on("resumeTimer",_.bind(this.animateProgressBar,this,false))}if(this.settings.pager){this.initPager()}if(this.settings.onHoverStop){this.$el.on({mouseenter:_.bind(this.onHoverInHandler,this),mouseleave:_.bind(this.onHoverOutHandler,this)})}if(this.settings.touchEnabled){this.initTouchEvents()}d(window).on("resize",_.bind(_.debounce(this.resizeHandler,200),this))},addClasses:function(){this.$el.addClass("dpdkarousel");this.$el.find(this.settings.animateEl).each(function(e,f){var g=d(f);g.addClass("slide-"+e);if(e==0){g.addClass("first");g.addClass("active")}if(e==this.totalSlides-1){g.addClass("last")}})},animateSlides:function(g){if(this.isAnimating||this.currentActiveSlide==this.apiActiveSlide){return}this.$el.trigger("slideStart");this.isAnimating=true;if(this.$pager){this.updatePagerBeforeAnimateSlide()}var f=(g=="next"?"-":"")+this.cWidth;var h=this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide);h.removeClass("active").transition({marginLeft:f+"px"},this.settings.animationDuration,this.settings.animationEasing,_.bind(function(){h.css({marginLeft:this.cWidth});this.isAnimating=false},this));if(this.apiActiveSlide!=-1){this.currentActiveSlide=this.apiActiveSlide;this.apiActiveSlide=-1}else{if(g=="next"){this.currentActiveSlide=(this.currentActiveSlide==this.totalSlides-1)?0:this.currentActiveSlide+1}else{this.currentActiveSlide=(this.currentActiveSlide==0)?this.totalSlides-1:this.currentActiveSlide-1}}if(g=="previous"){this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide).css({marginLeft:"-"+this.cWidth+"px"})}var e=this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide);e.transition({marginLeft:0},this.settings.animationDuration,this.settings.animationEasing,_.bind(function(){if(this.$pager){this.updatePagerAfterAnimateSlide()}e.addClass("active");this.$el.trigger("slideDone",this.currentActiveSlide)},this))},updatePagerBeforeAnimateSlide:function(){switch(this.settings.pager){case"li":this.$pager.find("li").eq(this.currentActiveSlide).removeClass("active");break;case"numbered":this.$pager.find(".current").html(this.currentActiveSlide+1);break}},updatePagerAfterAnimateSlide:function(){switch(this.settings.pager){case"li":this.$pager.find("li").eq(this.currentActiveSlide).addClass("active");break;case"numbered":this.$pager.find(".current").html(this.currentActiveSlide+1);break}},next:function(){this.timer.reset();this.animateSlides("next")},previous:function(){this.timer.reset();this.animateSlides("previous")},initProgressBar:function(){var e=d('<div><div class="front"></div><div class="back"></div></div>');e.addClass("progress-bar");this.$el.append(e);this.animateProgressBar(true,null,false)},animateProgressBar:function(h,i,g){if(h){this.$el.find(".progress-bar").stop();this.$el.find(".progress-bar").css({width:"0%"})}var f=g?g:this.settings.delay;this.$el.find(".progress-bar").animate({width:"100%"},{duration:f,queue:false,easing:"linear"})},pauseProgressBar:function(){this.$el.find(".progress-bar").stop()},initPager:function(){if(this.totalSlides==1){return}switch(this.settings.pager){case"li":this.initLiPager();break;case"numbered":this.initNumberedPager();break}this.$el.append(this.$pager)},initLiPager:function(){this.$pager=d("<ul>");this.$pager.addClass("pager");for(var e=0;e<this.totalSlides;e++){var f=d("<li>");f.data("index",e);if(e==0){f.addClass("active")}this.$pager.append(f)}this.$pager.on("click","li",_.bind(this.navigateToIndex,this))},navigateToIndex:function(f){this.apiActiveSlide=d(f.currentTarget).data("index");this.timer.reset();this.animateSlides("next")},initNumberedPager:function(){this.$pager=d("<span />").addClass("pager");var g=d("<span />").addClass("current").html("1");var e=d("<span />").addClass("seperator").html("/");var f=d("<span />").addClass("total").html(this.totalSlides);this.$pager.append(g).append(e).append(f)},onHoverInHandler:function(f){this.timer.pause()},onHoverOutHandler:function(f){if(this.apiPause==true){return}this.timer.resume()},initTouchEvents:function(){this.$el.swipe({swipeLeft:_.bind(this.next,this),swipeRight:_.bind(this.previous,this),threshold:100})},resizeHandler:function(f){this.cWidth=this.settings.widthIsFluid?d(window).width():this.settings.width;this.$el.width(this.cWidth);this.$el.find(this.settings.animateEl).not(":eq("+this.currentActiveSlide+")").css("margin-left",this.cWidth);if(this.settings.resizeHeight!==false){this.$el.height(d(window).height()-this.settings.resizeHeight)}if(this.settings.heightIsPercentage){this.$el.height(d(window).height()*this.settings.height)}},setPublicMethods:function(){this.$el.pause=_.bind(function(){this.apiPause=true;this.timer.pause()},this);this.$el.resume=_.bind(function(){this.apiPause=false;this.timer.resume()},this);this.$el.next=_.bind(function(){this.next()},this);this.$el.previous=_.bind(function(){this.previous()},this);this.$el.getCurrentActiveSlide=_.bind(function(){return this.currentActiveSlide},this);this.$el.setActiveSlide=_.bind(function(e){this.apiActiveSlide=e;this.animateSlides("next")},this)}};function a(g,j,f){var e=0,i,h=f;this.reset=function(){if(g.settings.timer==false){return}window.clearTimeout(e);e=0;h=f;this.resume()};this.pause=function(){if(g.settings.timer==false){return}window.clearTimeout(e);e=0;h-=new Date()-i;g.trigger("pauseTimer")};this.resume=function(){if(g.settings.timer==false||e>0){return}i=new Date();e=window.setTimeout(_.bind(function(){h=f;e=0;this.resume();j()},this),h);g.trigger("resumeTimer",h)};if(g.settings.timer==false){return}this.resume()}d.fn.dpdkarousel=function(f){if(f){var e=_.clone(c);this.settings=d.extend(e,f)}this.methods=_.clone(b);this.methods.init(this);this.methods.setPublicMethods();return this}})(jQuery);