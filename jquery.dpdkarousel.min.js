(function(e){function r(e,t,n){var r,i,s=n;this.reset=function(){if(e.settings.timer==false){return}s=n};this.pause=function(){if(e.settings.timer==false){return}window.clearTimeout(r);s-=new Date-i;e.trigger("pauseTimer")};var o=function(){if(e.settings.timer==false){return}i=new Date;r=window.setTimeout(function(){s=n;o();t()},s);e.trigger("resumeTimer",s)};this.resume=o;if(e.settings.timer==false){return}this.resume()}var t={widthIsFluid:true,width:1e3,height:400,resizeHeight:false,heightIsPercentage:false,timer:true,delay:1e4,animateEl:"li",touchEnabled:false,onHoverStop:true,animationDuration:700,animationEasing:"swing",progressBar:false,pager:false,pagerClickable:false,previousTrigger:".previous",nextTrigger:".next"};var n={$pager:null,currentActiveSlide:0,totalSlides:0,timer:null,width:0,isAnimating:false,apiPause:false,apiActiveSlide:-1,init:function(t){this.$el=t;this.settings=this.$el.settings;if(this.settings.heightIsPercentage==false){this.$el.height(this.settings.height)}this.width=this.settings.widthIsFluid?e(window).width():this.settings.width;this.totalSlides=this.$el.find(this.settings.animateEl).length;this.settings.timer=this.totalSlides==1?false:this.settings.timer;this.addClasses();this.timer=new r(this.$el,_.bind(this.animateSlides,this,"next"),this.settings.delay);this.$el.find(this.settings.nextTrigger).on("click touchstart",_.bind(this.next,this));this.$el.find(this.settings.previousTrigger).on("click touchstart",_.bind(this.previous,this));if(this.settings.progressBar){this.initProgressBar();this.$el.on("slideStart",_.bind(this.animateProgressBar,this,true));this.$el.on("pauseTimer",_.bind(this.pauseProgressBar,this));this.$el.on("resumeTimer",_.bind(this.animateProgressBar,this,false))}if(this.settings.pager){this.initPager()}if(this.settings.onHoverStop){this.$el.on({mouseenter:_.bind(this.onHoverInHandler,this),mouseleave:_.bind(this.onHoverOutHandler,this)})}if(this.settings.touchEnabled){this.initTouchEvents()}},addClasses:function(){this.$el.addClass("dpdkarousel");this.$el.find(this.settings.animateEl).each(function(t,n){var r=e(n);r.addClass("slide-"+t);if(t==0){r.addClass("first");r.addClass("active")}if(t==this.totalSlides-1){r.addClass("last")}})},animateSlides:function(e){if(this.isAnimating||this.currentActiveSlide==this.apiActiveSlide){return}this.$el.trigger("slideStart");this.isAnimating=true;if(this.$pager){this.updatePagerBeforeAnimateSlide()}var t=(e=="next"?"-":"")+this.width;var n=this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide);n.removeClass("active").transition({marginLeft:t+"px"},this.settings.animationDuration,this.settings.animationEasing,_.bind(function(){n.css({marginLeft:this.width});this.isAnimating=false},this));if(this.apiActiveSlide!=-1){this.currentActiveSlide=this.apiActiveSlide;this.apiActiveSlide=-1}else if(e=="next"){this.currentActiveSlide=this.currentActiveSlide==this.totalSlides-1?0:this.currentActiveSlide+1}else{this.currentActiveSlide=this.currentActiveSlide==0?this.totalSlides-1:this.currentActiveSlide-1}if(e=="previous"){this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide).css({marginLeft:"-"+this.width+"px"})}var r=this.$el.find(this.settings.animateEl).eq(this.currentActiveSlide);r.transition({marginLeft:0},this.settings.animationDuration,this.settings.animationEasing,_.bind(function(){if(this.$pager){this.updatePagerAfterAnimateSlide()}r.addClass("active");this.$el.trigger("slideDone",this.currentActiveSlide)},this))},updatePagerBeforeAnimateSlide:function(){switch(this.settings.pager){case"li":this.$pager.find("li").eq(this.currentActiveSlide).removeClass("active");break;case"numbered":this.$pager.find(".current").html(this.currentActiveSlide+1);break}},updatePagerAfterAnimateSlide:function(){switch(this.settings.pager){case"li":this.$pager.find("li").eq(this.currentActiveSlide).addClass("active");break;case"numbered":this.$pager.find(".current").html(this.currentActiveSlide+1);break}},next:function(){this.timer.reset();this.animateSlides("next")},previous:function(){this.timer.reset();this.animateSlides("previous")},initProgressBar:function(){var t=e('<div><div class="front"></div><div class="back"></div></div>');t.addClass("progress-bar");this.$el.append(t);this.animateProgressBar(true,null,false)},animateProgressBar:function(e,t,n){if(e){this.$el.find(".progress-bar").stop();this.$el.find(".progress-bar").css({width:"0%"})}var r=n?n:this.settings.delay;this.$el.find(".progress-bar").animate({width:"100%"},{duration:r,queue:false,easing:"linear"})},pauseProgressBar:function(){this.$el.find(".progress-bar").stop()},initPager:function(){if(this.totalSlides==1){return}switch(this.settings.pager){case"li":this.initLiPager();break;case"numbered":this.initNumberedPager();break}this.$el.append(this.$pager)},initLiPager:function(){this.$pager=e("<ul>");this.$pager.addClass("pager");for(var t=0;t<this.totalSlides;t++){var n=e("<li>");n.data("index",t);if(t==0){n.addClass("active")}this.$pager.append(n)}this.$pager.on("click","li",_.bind(this.navigateToIndex,this))},navigateToIndex:function(t){this.apiActiveSlide=e(t.currentTarget).data("index");this.animateSlides("next")},initNumberedPager:function(){this.$pager=e("<span />").addClass("pager");var t=e("<span />").addClass("current").html("1");var n=e("<span />").addClass("seperator").html("/");var r=e("<span />").addClass("total").html(this.totalSlides);this.$pager.append(t).append(n).append(r)},onHoverInHandler:function(e){this.timer.pause()},onHoverOutHandler:function(e){if(this.apiPause==true){return}this.timer.resume()},initTouchEvents:function(){this.$el.swipe({swipeLeft:_.bind(this.next,this),swipeRight:_.bind(this.previous,this),threshold:100})},resizeHandler:function(t){this.width=this.settings.widthIsFluid?e(window).width():this.settings.width;if(this.settings.resizeHeight!==false){this.height(e(window).height()-this.settings.resizeHeight)}if(this.settings.heightIsPercentage){this.height(e(window).height()*this.settings.height)}},setPublicMethods:function(){this.$el.pause=_.bind(function(){this.apiPause=true;this.timer.pause()},this);this.$el.resume=_.bind(function(){this.apiPause=false;this.timer.resume()},this);this.$el.next=_.bind(function(){this.next()},this);this.$el.previous=_.bind(function(){this.previous()},this);this.$el.getCurrentActiveSlide=_.bind(function(){return this.currentActiveSlide},this);this.$el.setActiveSlide=_.bind(function(e){this.apiActiveSlide=e;this.animateSlides("next")},this)}};e.fn.dpdkarousel=function(r){if(r){var i=_.clone(t);this.settings=e.extend(i,r)}this.methods=_.clone(n);this.methods.init(this);e(window).on("resize",_.bind(_.debounce(this.methods.resizeHandler,200),this));this.methods.setPublicMethods();return this}})(jQuery)